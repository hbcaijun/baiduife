<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>IFE Task 20</title>
    <style type="text/css">
	#input{ width: 100%;}
    td
      {
      background-color:red;
      color:white;
      font-size: 20px;
      text-align: center;
      width: 40px;
      height: 40px;
      }
      span{
        color:green;
      }
    </style>
  </head>
<body>

<div id="t20">
  <textarea rows = "4" cols = "20" id ="input"></textarea>
  <button id ="add">添加</button>
  <input type="text" id ="searchText">
  <button id ="search">查找</button>
  <table id = "table">
    <tr id = "tr">
      <!-- <td><span>test</span></td> -->
    </tr>
  </table>
</div>

<script type="text/javascript">

var ar = new Array();

function add(){
	var text = document.getElementById("input").value.trim();
  console.log(text);
  ar = text.split(/[^0-9a-zA-Z\u4e00-\u9fa5]+/);
  if(ar[0].length=="") {
    ar.shift();
  }
  if(ar[ar.length-1]=="") {
    ar.pop();
  }
	var tr = document.getElementById("tr");
  for(var i = 0; i < ar.length; i++){
    var inputBox = document.createElement("td");
    inputBox.id = i;
    inputBox.innerHTML = ar[i];
    tr.appendChild(inputBox);
  }




}

function search(){
	var searchText = document.getElementById("searchText").value.trim();
  var patt = new RegExp(searchText,"g");
	for (var i = 0; i < ar.length; i++){
    var arTxt = document.getElementById(i).innerHTML;
    arTxt.replace(patt,"<span>"+searchText+"</span>");
	}


}

document.getElementById("t20").addEventListener("click",function(event){
  if(event.target.id == "add")
	add();
  if(event.target.id == "search")
	search();


});



</script>
</body>
</html>
